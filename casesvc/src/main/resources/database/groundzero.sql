DROP ROLE IF EXISTS role_connect;
DROP ROLE IF EXISTS casesvc;
DROP USER IF EXISTS casesvc;
DROP SCHEMA IF EXISTS casesvc CASCADE;

CREATE ROLE casesvc PASSWORD 'casesvc'
  NOSUPERUSER NOCREATEDB NOCREATEROLE NOREPLICATION INHERIT LOGIN;

CREATE SCHEMA casesvc AUTHORIZATION casesvc;

REVOKE ALL ON ALL TABLES IN SCHEMA casesvc FROM PUBLIC;
REVOKE ALL ON ALL SEQUENCES IN SCHEMA casesvc FROM PUBLIC;
REVOKE CONNECT ON DATABASE postgres FROM PUBLIC;

GRANT CONNECT ON DATABASE postgres TO casesvc;
GRANT SELECT, INSERT, UPDATE, DELETE ON ALL TABLES IN SCHEMA casesvc TO casesvc;
GRANT ALL ON ALL SEQUENCES IN SCHEMA casesvc TO casesvc;
